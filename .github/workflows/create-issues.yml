name: ðŸ“¥ Import Issues from YAML
on:
  workflow_dispatch:

jobs:
  import-issues:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup yq & jq
        run: sudo apt-get install -y yq jq

      - name: Create issues from YAML
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          yq -o=json '.issues[]' github-issues.yaml | while read -r issue; do
            title=$(echo "$issue" | jq -r '.title')
            body=$(echo "$issue" | jq -r '.body')
            labels=$(echo "$issue" | jq -r '.labels | join(",")')

            if [[ -n "$title" ]]; then
              echo "ðŸª¶ Creating issue: $title"
              gh issue create --title "$title" --body "$body" --label "$labels" || true
            fi
          done
